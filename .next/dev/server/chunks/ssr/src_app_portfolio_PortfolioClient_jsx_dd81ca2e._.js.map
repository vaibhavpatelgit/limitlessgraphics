{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Vaibhav/My%20stuff/limitlessgraphicsweb/limitlessgraphics/src/app/portfolio/PortfolioClient.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState, useCallback, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport Link from \"next/link\";\r\n\r\nconst listVariants = {\r\n  hidden: { opacity: 0 },\r\n  show: {\r\n    opacity: 1,\r\n    transition: {\r\n      ease: \"easeOut\",\r\n      duration: 0.3,\r\n      staggerChildren: 0.07,\r\n      delayChildren: 0.1,\r\n    },\r\n  },\r\n};\r\n\r\nconst cardVariants = {\r\n  hidden: { opacity: 0, y: 18, scale: 0.98 },\r\n  show: {\r\n    opacity: 1,\r\n    y: 0,\r\n    scale: 1,\r\n    transition: { duration: 0.35, ease: \"easeOut\" },\r\n  },\r\n  exit: { opacity: 0, scale: 0.95, transition: { duration: 0.2 } },\r\n};\r\n\r\nconst norm = (s) =>\r\n  String(s || \"\")\r\n    .trim()\r\n    .toLowerCase();\r\n\r\nexport default function PortfolioClient({ items = [], filters = [] }) {\r\n  // ✅ restore cache on first mount (protects you when server fetch fails after a click)\r\n  const [allItems, setAllItems] = useState(() => {\r\n    try {\r\n      const cached = sessionStorage.getItem(\"lg_portfolio_items\");\r\n      if (cached) {\r\n        const parsed = JSON.parse(cached);\r\n        if (Array.isArray(parsed) && parsed.length) return parsed;\r\n      }\r\n    } catch {}\r\n    return Array.isArray(items) ? items : [];\r\n  });\r\n\r\n  // ✅ whenever server sends a good list, update cache + state\r\n  useEffect(() => {\r\n    if (Array.isArray(items) && items.length > 0) {\r\n      setAllItems(items);\r\n      try {\r\n        sessionStorage.setItem(\"lg_portfolio_items\", JSON.stringify(items));\r\n      } catch {}\r\n    }\r\n  }, [items]);\r\n\r\n  const safeFilters = useMemo(() => {\r\n    const derived =\r\n      Array.isArray(filters) && filters.length\r\n        ? filters\r\n        : [\r\n            \"All\",\r\n            ...Array.from(\r\n              new Set(allItems.map((x) => x.category).filter(Boolean))\r\n            ),\r\n          ];\r\n\r\n    const rest = derived.filter((f) => norm(f) !== \"all\");\r\n    return [\"All\", ...rest];\r\n  }, [filters, allItems]);\r\n\r\n  const [filter, setFilter] = useState(\"All\");\r\n  const [lightboxIdx, setLightboxIdx] = useState(-1);\r\n\r\n  const data = useMemo(() => {\r\n    if (norm(filter) === \"all\") return allItems;\r\n    const f = norm(filter);\r\n    return allItems.filter((i) => norm(i.category) === f);\r\n  }, [allItems, filter]);\r\n\r\n  // reset lightbox on filter changes\r\n  useEffect(() => setLightboxIdx(-1), [filter]);\r\n\r\n  const open = useCallback((idx) => setLightboxIdx(idx), []);\r\n  const close = useCallback(() => setLightboxIdx(-1), []);\r\n\r\n  const next = useCallback(() => {\r\n    const len = data.length || 1;\r\n    setLightboxIdx((i) => (i < 0 ? 0 : i + 1) % len);\r\n  }, [data.length]);\r\n\r\n  const prev = useCallback(() => {\r\n    const len = data.length || 1;\r\n    setLightboxIdx((i) => (i < 0 ? 0 : i - 1 + len) % len);\r\n  }, [data.length]);\r\n\r\n  // keyboard navigation\r\n  useEffect(() => {\r\n    if (lightboxIdx < 0) return;\r\n    const onKey = (e) => {\r\n      if (e.key === \"Escape\") close();\r\n      if (e.key === \"ArrowRight\") next();\r\n      if (e.key === \"ArrowLeft\") prev();\r\n    };\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [lightboxIdx, close, next, prev]);\r\n\r\n  return (\r\n    <section className=\"relative z-10\">\r\n      {/* Filters */}\r\n      <div className=\"mx-auto w-full max-w-[2000px] px-4 md:px-8 pb-6\">\r\n        <div className=\"flex flex-wrap items-center justify-center gap-2\">\r\n          {safeFilters.map((f) => {\r\n            const active = norm(f) === norm(filter);\r\n            return (\r\n              <button\r\n                key={f}\r\n                type=\"button\" // ✅ IMPORTANT\r\n                onClick={(e) => {\r\n                  e.preventDefault(); // ✅ IMPORTANT\r\n                  setFilter(f);\r\n                }}\r\n                className={`group relative rounded-full border px-3.5 py-1.5 text-sm transition\r\n                  ${\r\n                    active\r\n                      ? \"border-transparent bg-gradient-to-r from-fuchsia-500 via-amber-400 to-cyan-400 text-black\"\r\n                      : \"border-white/15 bg-white/5 text-white/80 hover:bg-white/10\"\r\n                  }`}\r\n              >\r\n                {f}\r\n                {!active && (\r\n                  <span className=\"pointer-events-none absolute -bottom-px left-3 right-3 h-[2px] origin-left scale-x-0 bg-gradient-to-r from-fuchsia-500 via-amber-400 to-cyan-400 transition-transform group-hover:scale-x-100\" />\r\n                )}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Grid */}\r\n      <div className=\"mx-auto w-full max-w-[2000px] px-4 md:px-8 pb-14\">\r\n        {data.length === 0 ? (\r\n          <div className=\"mx-auto max-w-3xl py-16 text-center\">\r\n            <h2 className=\"text-2xl font-bold text-white\">No projects found</h2>\r\n            <p className=\"mt-2 text-white/70\">\r\n              Try another filter or add items for this category.\r\n            </p>\r\n\r\n            {/* Debug line (keep for now) */}\r\n            <p className=\"mt-4 text-xs text-white/40\">\r\n              Debug: allItems={allItems.length} | filter=\"{filter}\" | filtered=\r\n              {data.length}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <motion.ul\r\n            variants={listVariants}\r\n            initial=\"hidden\"\r\n            whileInView=\"show\"\r\n            viewport={{ once: true, amount: 0.2 }}\r\n            className=\"grid gap-6\r\n                     sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\r\n                     xl:grid-cols-5 2xl:grid-cols-6\"\r\n          >\r\n            <AnimatePresence initial={false} mode=\"popLayout\">\r\n              {data.map((item, idx) => (\r\n                <motion.li\r\n                  key={item.id}\r\n                  variants={cardVariants}\r\n                  layout\r\n                  className=\"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 backdrop-blur\"\r\n                >\r\n                  <div className=\"relative overflow-hidden rounded-2xl\">\r\n                    <img\r\n                      src={item.img}\r\n                      alt={item.title}\r\n                      className=\"w-full aspect-[16/10] object-cover transition-transform duration-700 group-hover:scale-105\"\r\n                      loading=\"lazy\"\r\n                      decoding=\"async\"\r\n                    />\r\n                    <div className=\"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/10 via-transparent to-black/40 opacity-70\" />\r\n                  </div>\r\n\r\n                  <div className=\"relative z-10 -mt-12 p-4\">\r\n                    <div className=\"mb-2 flex flex-wrap items-center gap-1.5\">\r\n                      <span className=\"inline-flex items-center rounded-full border border-white/15 bg-white/10 px-2 py-0.5 text-[11px] text-white/90\">\r\n                        {item.category}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <h3 className=\"text-white font-semibold\">{item.title}</h3>\r\n\r\n                    <div className=\"mt-3 flex items-center gap-2\">\r\n                      <button\r\n                        type=\"button\" // ✅ IMPORTANT\r\n                        onClick={(e) => {\r\n                          e.preventDefault(); // ✅ IMPORTANT\r\n                          open(idx);\r\n                        }}\r\n                        className=\"rounded-full bg-gradient-to-r from-fuchsia-500 via-amber-400 to-cyan-400 px-3 py-1.5 text-sm font-semibold text-black\"\r\n                      >\r\n                        Quick view\r\n                      </button>\r\n\r\n                      <Link\r\n                        href={`/portfolio/${item.id}`}\r\n                        className=\"rainbow-link text-white/80 text-sm\"\r\n                      >\r\n                        View project\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"pointer-events-none absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300 group-hover:opacity-100 bg-gradient-to-br from-white/10 via-transparent to-white/5\" />\r\n                </motion.li>\r\n              ))}\r\n            </AnimatePresence>\r\n          </motion.ul>\r\n        )}\r\n      </div>\r\n\r\n      {/* Lightbox */}\r\n      <AnimatePresence>\r\n        {lightboxIdx >= 0 && data[lightboxIdx] && (\r\n          <motion.div\r\n            className=\"fixed inset-0 z-[999] grid place-items-center bg-black/70 backdrop-blur\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={close}\r\n          >\r\n            <motion.div\r\n              className=\"relative w-[min(94vw,1200px)] overflow-hidden rounded-2xl border border-white/15 bg-neutral-900/90\"\r\n              initial={{ scale: 0.96, y: 20, opacity: 0 }}\r\n              animate={{ scale: 1, y: 0, opacity: 1 }}\r\n              exit={{ scale: 0.98, y: 10, opacity: 0 }}\r\n              transition={{ duration: 0.25 }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <div className=\"grid gap-0 md:grid-cols-2\">\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={data[lightboxIdx].img}\r\n                    alt={data[lightboxIdx].title}\r\n                    className=\"h-full w-full object-cover\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"relative p-5 sm:p-7\">\r\n                  <h3 className=\"text-xl font-semibold text-white\">\r\n                    {data[lightboxIdx].title}\r\n                  </h3>\r\n\r\n                  <div className=\"absolute right-4 top-4 flex items-center gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={prev}\r\n                      className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1 text-white/80 hover:bg-white/15\"\r\n                    >\r\n                      ‹\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={next}\r\n                      className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1 text-white/80 hover:bg-white/15\"\r\n                    >\r\n                      ›\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={close}\r\n                      className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1 text-white/80 hover:bg-white/15\"\r\n                    >\r\n                      ✕\r\n                    </button>\r\n                  </div>\r\n\r\n                  <Link\r\n                    href=\"/#contact\"\r\n                    className=\"mt-5 inline-flex items-center rounded-full bg-gradient-to-r from-fuchsia-500 via-amber-400 to-cyan-400 px-4 py-2 font-semibold text-black\"\r\n                  >\r\n                    Start a quote\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}